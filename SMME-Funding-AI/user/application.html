<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for Funding | ELIDZ SMME AI Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #0f172a;
            --secondary: #1e40af;
            --accent: #059669;
            --white: #ffffff;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-600: #475569;
            --gray-800: #1e293b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.6;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--gray-200);
            z-index: 1000;
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 6rem 2rem 2rem;
        }

        .header-section {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .header-section p {
            font-size: 1.125rem;
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
        }

        .progress-bar {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--gray-200);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .step-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .step-circle.completed {
            background: var(--success);
            color: var(--white);
        }

        .step-circle.active {
            background: var(--secondary);
            color: var(--white);
        }

        .step-circle.pending {
            background: var(--gray-200);
            color: var(--gray-600);
        }

        .progress-line {
            height: 2px;
            background: var(--gray-200);
            flex: 1;
            margin: 0 1rem;
        }

        .progress-line.completed {
            background: var(--success);
        }

        .form-container {
            background: var(--white);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--gray-200);
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.875rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            color: var(--gray-600);
            margin-bottom: 2rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-800);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.875rem;
            transition: all 0.2s;
            background: var(--white);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
            font-size: 0.875rem;
        }

        .btn-primary {
            background: var(--secondary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            color: var(--gray-600);
            border: 1px solid var(--gray-200);
        }

        .btn-outline:hover {
            background: var(--gray-50);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-200);
        }

        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .verification-card {
            background: var(--white);
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .verification-card.verified {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .verification-card.pending {
            border-color: var(--warning);
            background: rgba(245, 158, 11, 0.05);
        }

        .verification-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .verification-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
        }

        .verification-card.verified .verification-icon {
            background: var(--success);
            color: var(--white);
        }

        .verification-card.pending .verification-icon {
            background: var(--warning);
            color: var(--white);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-verified {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .opportunities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .opportunity-card {
            background: var(--white);
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .opportunity-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .match-score {
            background: var(--success);
            color: var(--white);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .opportunity-details {
            margin: 1rem 0;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .detail-label {
            color: var(--gray-600);
        }

        .detail-value {
            font-weight: 500;
            color: var(--gray-800);
        }

        @media (max-width: 768px) {
            .container {
                padding: 5rem 1rem 2rem;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .form-actions {
                flex-direction: column;
                gap: 1rem;
            }
        }


    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img src="https://www.globalafricanetwork.com/wp-content/uploads/2021/05/ELIDZ-LOGO-transparent-2.png" alt="ELIDZ SMME AI" style="height: 40px; margin-right: 10px;">
            </div>
            <div class="nav-actions">
                <a href="#" class="btn btn-outline">
                    <i class="fas fa-question-circle"></i>
                    Help
                </a>
                <a href="login.html" class="btn btn-outline">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </a>
                <a href="portal/portal.html" class="btn btn-primary">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="header-section">
            <h1>ELIDZ Eastern Cape Business Portal</h1>
            <p>Exclusive to Eastern Cape businesses only. Verification required for platform access.</p>
        </div>

        <div class="progress-bar">
            <div class="progress-steps">
                <div class="progress-step">
                    <div class="step-circle active" id="step1">1</div>
                    <span>Business Details</span>
                </div>
                <div class="progress-line" id="line1"></div>
                <div class="progress-step">
                    <div class="step-circle pending" id="step2">2</div>
                    <span>Document Verification</span>
                </div>
                <div class="progress-line" id="line2"></div>
                <div class="progress-step">
                    <div class="step-circle pending" id="step3">3</div>
                    <span>Account Creation</span>
                </div>
            </div>
        </div>

        <div class="form-container">
            <!-- Step 1: Business Information -->
            <div id="step-business" class="form-section active">
                <h2 class="section-title">Business Information</h2>
                <p class="section-subtitle">Provide business details for CIPC verification</p>
                
                <div style="background: #dc2626; color: white; border-radius: 8px; padding: 1rem; margin-bottom: 2rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-map-marker-alt"></i>
                        <strong>EASTERN CAPE ONLY:</strong> This platform is exclusively for businesses located in the Eastern Cape Province.
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="companyName">Company Name *</label>
                        <input type="text" id="companyName" placeholder="Enter your registered company name" required>
                    </div>
                    <div class="form-group">
                        <label for="regNumber">Registration Number *</label>
                        <input type="text" id="regNumber" placeholder="e.g., 2023/123456/07" required>
                    </div>
                    <div class="form-group">
                        <label for="industry">Industry Sector *</label>
                        <select id="industry" required>
                            <option value="">Select your industry</option>
                            <option value="technology">Technology & Software</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="retail">Retail & E-commerce</option>
                            <option value="services">Professional Services</option>
                            <option value="agriculture">Agriculture & Food</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="construction">Construction</option>
                            <option value="tourism">Tourism & Hospitality</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="yearsOperation">Years in Operation *</label>
                        <select id="yearsOperation" required>
                            <option value="">Select years</option>
                            <option value="startup">Startup (Less than 1 year)</option>
                            <option value="1-2">1-2 years</option>
                            <option value="3-5">3-5 years</option>
                            <option value="6-10">6-10 years</option>
                            <option value="10+">More than 10 years</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="employees">Number of Employees *</label>
                        <select id="employees" required>
                            <option value="">Select employee count</option>
                            <option value="1-5">1-5 employees</option>
                            <option value="6-20">6-20 employees</option>
                            <option value="21-50">21-50 employees</option>
                            <option value="51-200">51-200 employees</option>
                            <option value="200+">More than 200 employees</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="location">Eastern Cape City/Town *</label>
                        <select id="location" required>
                            <option value="">Select your city/town</option>
                            <option value="port-elizabeth">Gqeberha (Port Elizabeth)</option>
                            <option value="east-london">East London</option>
                            <option value="uitenhage">Kariega (Uitenhage)</option>
                            <option value="king-williams-town">King William's Town</option>
                            <option value="mdantsane">Mdantsane</option>
                            <option value="butterworth">Butterworth</option>
                            <option value="queenstown">Queenstown</option>
                            <option value="grahamstown">Makhanda (Grahamstown)</option>
                            <option value="fort-beaufort">Fort Beaufort</option>
                            <option value="alice">Alice</option>
                            <option value="cradock">Cradock</option>
                            <option value="graaff-reinet">Graaff-Reinet</option>
                            <option value="somerset-east">Somerset East</option>
                            <option value="jeffreys-bay">Jeffreys Bay</option>
                            <option value="humansdorp">Humansdorp</option>
                            <option value="other-ec">Other Eastern Cape Location</option>
                        </select>
                        <small style="color: var(--gray-600); margin-top: 0.25rem; display: block;">Only Eastern Cape businesses are eligible for this program</small>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="businessDescription">Business Description</label>
                    <textarea id="businessDescription" placeholder="Briefly describe your business activities and main products/services"></textarea>
                </div>
                
                <div style="background: var(--gray-50); border-radius: 12px; padding: 2rem; margin-top: 2rem; text-align: center;" id="cipc-verification">
                    <h3 style="color: var(--gray-600); margin-bottom: 1rem;">Eastern Cape Business Verification</h3>
                    <div id="cipc-status" style="margin-bottom: 1.5rem;">
                        <div style="background: var(--gray-200); color: var(--gray-600); padding: 1rem; border-radius: 8px; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock"></i>
                            Complete form to verify Eastern Cape business registration
                        </div>
                    </div>
                    <button class="btn btn-primary" id="verify-cipc-btn" onclick="verifyCIPC()" disabled style="opacity: 0.5;">
                        <i class="fas fa-map-marker-alt"></i>
                        Verify Eastern Cape Business
                    </button>
                </div>
            </div>

            <!-- Step 2: Document Verification -->
            <div id="step-verification" class="form-section">
                <h2 class="section-title">Document Verification</h2>
                <p class="section-subtitle">All documents must be verified before platform access is granted</p>
                
                <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem; margin-bottom: 2rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; color: #92400e;">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Security Notice:</strong> Login credentials will only be created after ALL verifications pass.
                    </div>
                </div>
                
                <div class="verification-grid">
                    <div class="verification-card pending" id="cipc-card">
                        <div class="verification-header">
                            <div class="verification-icon">
                                <i class="fas fa-building"></i>
                            </div>
                            <div>
                                <h3>CIPC Registration</h3>
                                <div class="status-badge status-pending" id="cipc-status">
                                    <i class="fas fa-clock"></i>
                                    Pending
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="regNumberVerify">Registration Number *</label>
                            <input type="text" id="regNumberVerify" placeholder="Must match business registration" required>
                        </div>
                        <button class="btn btn-primary" onclick="verifyDocument('cipc')" style="width: 100%; margin-top: 0.5rem;">
                            <i class="fas fa-search"></i>
                            Verify CIPC
                        </button>
                    </div>
                    
                    <div class="verification-card pending" id="sars-card">
                        <div class="verification-header">
                            <div class="verification-icon">
                                <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                            <div>
                                <h3>SARS Tax Compliance</h3>
                                <div class="status-badge status-pending" id="sars-status">
                                    <i class="fas fa-clock"></i>
                                    Pending
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="taxNumber">Tax Reference Number *</label>
                            <input type="text" id="taxNumber" placeholder="Enter tax reference number" required>
                        </div>
                        <button class="btn btn-primary" onclick="verifyDocument('sars')" style="width: 100%; margin-top: 0.5rem;">
                            <i class="fas fa-search"></i>
                            Verify Tax Status
                        </button>
                    </div>
                    
                    <div class="verification-card pending" id="bank-card">
                        <div class="verification-header">
                            <div class="verification-icon">
                                <i class="fas fa-landmark"></i>
                            </div>
                            <div>
                                <h3>Banking Verification</h3>
                                <div class="status-badge status-pending" id="bank-status">
                                    <i class="fas fa-clock"></i>
                                    Pending
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="bankAccount">Business Account Number *</label>
                            <input type="text" id="bankAccount" placeholder="Active business account required" required>
                        </div>
                        <button class="btn btn-primary" onclick="verifyDocument('bank')" style="width: 100%; margin-top: 0.5rem;">
                            <i class="fas fa-search"></i>
                            Verify Banking
                        </button>
                    </div>
                    
                    <div class="verification-card pending" id="director-card">
                        <div class="verification-header">
                            <div class="verification-icon">
                                <i class="fas fa-id-card"></i>
                            </div>
                            <div>
                                <h3>Director Identity</h3>
                                <div class="status-badge status-pending" id="director-status">
                                    <i class="fas fa-clock"></i>
                                    Pending
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="directorId">Director ID Number *</label>
                            <input type="text" id="directorId" placeholder="South African ID required" required>
                        </div>
                        <button class="btn btn-primary" onclick="verifyDocument('director')" style="width: 100%; margin-top: 0.5rem;">
                            <i class="fas fa-search"></i>
                            Verify Identity
                        </button>
                    </div>
                </div>
                
                <div style="background: var(--gray-50); border-radius: 12px; padding: 2rem; margin-top: 2rem; text-align: center;" id="verification-summary">
                    <h3 style="color: var(--gray-600); margin-bottom: 1rem;">Verification Progress: <span id="progress-count">0/4</span></h3>
                    <div style="background: var(--gray-200); height: 8px; border-radius: 4px; margin: 1rem 0;">
                        <div id="progress-fill" style="background: var(--success); height: 100%; width: 0%; border-radius: 4px; transition: width 0.3s;"></div>
                    </div>
                    <p style="color: var(--gray-600); margin-bottom: 1rem;">All verifications must pass to proceed</p>
                    <button class="btn btn-primary" id="create-account-btn" disabled style="opacity: 0.5;">
                        <i class="fas fa-lock"></i>
                        Complete All Verifications First
                    </button>
                </div>
            </div>

            <!-- Step 3: Account Creation -->
            <div id="step-account" class="form-section">
                <h2 class="section-title">Account Created Successfully</h2>
                <p class="section-subtitle">Your ELIDZ Eastern Cape business account has been automatically generated</p>
                
                <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border-radius: 12px; padding: 2rem; margin-bottom: 2rem; text-align: center;">
                    <div style="margin-bottom: 1.5rem;">
                        <i class="fas fa-check-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <h3 style="margin: 0; font-size: 1.5rem;">Verification Complete!</h3>
                        <p style="margin: 0.5rem 0 0; opacity: 0.9;">Your Eastern Cape business has been successfully verified and your account is ready</p>
                    </div>
                </div>
                
                <!-- Login Credentials -->
                <div style="background: var(--gray-50); border: 2px solid var(--secondary); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 style="color: var(--primary); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-key"></i>
                        Your Login Credentials
                    </h3>
                    
                    <div style="background: white; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-600); margin-bottom: 0.5rem;">Username</label>
                                <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; font-family: monospace; font-size: 1rem; border: 1px solid var(--gray-200);" id="generated-username">Loading...</div>
                            </div>
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-600); margin-bottom: 0.5rem;">Temporary Password</label>
                                <div style="background: var(--gray-50); padding: 1rem; border-radius: 6px; font-family: monospace; font-size: 1rem; border: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center;">
                                    <span id="generated-password">Loading...</span>
                                    <button onclick="copyPassword()" style="background: var(--secondary); color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; font-size: 0.75rem;">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; color: #92400e; margin-bottom: 0.5rem;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>Important Security Notice</strong>
                        </div>
                        <ul style="margin: 0; padding-left: 1.5rem; color: #92400e; font-size: 0.875rem;">
                            <li>Save these credentials securely</li>
                            <li>You will be required to change your password on first login</li>
                            <li>Username cannot be changed after account creation</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Account Summary -->
                <div style="background: white; border: 1px solid var(--gray-200); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-building"></i>
                        Business Account Summary
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.25rem;">Company Name</div>
                            <div style="font-weight: 600;" id="summary-business">-</div>
                        </div>
                        <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.25rem;">Registration Number</div>
                            <div style="font-weight: 600;" id="summary-registration">-</div>
                        </div>
                        <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.25rem;">Location</div>
                            <div style="font-weight: 600;" id="summary-location">-</div>
                        </div>
                        <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px;">
                            <div style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 0.25rem;">Industry</div>
                            <div style="font-weight: 600;" id="summary-sector">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- Next Steps -->
                <div style="background: linear-gradient(135deg, rgba(30, 64, 175, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border: 1px solid var(--secondary); border-radius: 12px; padding: 2rem; text-align: center;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem;">ðŸŽ‰ Welcome to ELIDZ!</h3>
                    <p style="color: var(--gray-600); margin-bottom: 2rem;">Your account is ready. Use your login credentials to access the platform and start exploring funding opportunities.</p>
                    
                    <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                        <button onclick="downloadCredentials()" class="btn btn-outline">
                            <i class="fas fa-download"></i>
                            Download Credentials
                        </button>
                        <button onclick="proceedToLogin()" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            Login to Platform
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Review & Submit -->
            <div id="step-review" class="form-section">
                <h2 class="section-title">Matched Opportunities</h2>
                <p class="section-subtitle">AI has found these funding opportunities that match your profile</p>
                
                <div class="opportunities-grid">
                    <div class="opportunity-card">
                        <div class="opportunity-header">
                            <div>
                                <h3>SEDA Business Grant</h3>
                                <p>Small Enterprise Development Agency</p>
                            </div>
                            <div class="match-score">95% Match</div>
                        </div>
                        <div class="opportunity-details">
                            <div class="detail-row">
                                <span class="detail-label">Amount:</span>
                                <span class="detail-value">R500,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Type:</span>
                                <span class="detail-value">Non-repayable Grant</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Timeline:</span>
                                <span class="detail-value">45 days</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Sector:</span>
                                <span class="detail-value">Technology</span>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-file-alt"></i>
                            Apply Now
                        </button>
                    </div>
                    
                    <div class="opportunity-card">
                        <div class="opportunity-header">
                            <div>
                                <h3>IDC Funding Scheme</h3>
                                <p>Industrial Development Corporation</p>
                            </div>
                            <div class="match-score">88% Match</div>
                        </div>
                        <div class="opportunity-details">
                            <div class="detail-row">
                                <span class="detail-label">Amount:</span>
                                <span class="detail-value">R2,000,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Type:</span>
                                <span class="detail-value">Low-interest Loan</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Timeline:</span>
                                <span class="detail-value">60 days</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Interest:</span>
                                <span class="detail-value">Prime - 2%</span>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-file-alt"></i>
                            Apply Now
                        </button>
                    </div>
                    
                    <div class="opportunity-card">
                        <div class="opportunity-header">
                            <div>
                                <h3>NYDA Youth Fund</h3>
                                <p>National Youth Development Agency</p>
                            </div>
                            <div class="match-score">82% Match</div>
                        </div>
                        <div class="opportunity-details">
                            <div class="detail-row">
                                <span class="detail-label">Amount:</span>
                                <span class="detail-value">R1,000,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Type:</span>
                                <span class="detail-value">Grant + Mentorship</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Timeline:</span>
                                <span class="detail-value">30 days</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Age Limit:</span>
                                <span class="detail-value">18-35 years</span>
                            </div>
                        </div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-file-alt"></i>
                            Apply Now
                        </button>
                    </div>
                </div>
            </div>


            <div class="form-actions">
                <button type="button" class="btn btn-outline" id="prevBtn" onclick="previousStep()" style="display: none;">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                    Next Step
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 3;
        let verificationStatus = {
            cipc: false,
            sars: false,
            bank: false,
            director: false
        };

        function updateProgressBar() {
            // Update step circles
            for (let i = 1; i <= totalSteps; i++) {
                const stepCircle = document.getElementById(`step${i}`);
                const line = document.getElementById(`line${i}`);
                
                if (i < currentStep) {
                    stepCircle.className = 'step-circle completed';
                    stepCircle.innerHTML = '<i class="fas fa-check"></i>';
                    if (line) line.className = 'progress-line completed';
                } else if (i === currentStep) {
                    stepCircle.className = 'step-circle active';
                    stepCircle.textContent = i;
                    if (line) line.className = 'progress-line';
                } else {
                    stepCircle.className = 'step-circle pending';
                    stepCircle.textContent = i;
                    if (line) line.className = 'progress-line';
                }
            }
        }

        function showStep(step) {
            // Hide all sections
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show current section
            const sections = ['step-business', 'step-verification', 'step-account'];
            document.getElementById(sections[step - 1]).classList.add('active');
            
            // Generate credentials when showing account creation step
            if (step === 3) {
                setTimeout(() => {
                    generateLoginCredentials();
                    updateAccountSummary();
                }, 500);
            }
            
            // Update buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = step === 1 ? 'none' : 'inline-flex';
            
            if (step === totalSteps) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.innerHTML = 'Next Step <i class="fas fa-arrow-right"></i>';
                nextBtn.onclick = nextStep;
                nextBtn.style.display = 'inline-flex';
            }
        }

        let businessVerified = false;
        
        function nextStep() {
            if (currentStep === 1 && !businessVerified) {
                alert('Please verify your business with CIPC before proceeding.');
                return;
            }
            
            if (currentStep === 2) {
                const completed = Object.values(verificationStatus).filter(Boolean).length;
                if (completed < 4) {
                    alert('Please complete all verifications before proceeding.');
                    return;
                }
            }
            
            if (currentStep < totalSteps) {
                currentStep++;
                updateProgressBar();
                showStep(currentStep);
            }
        }
        
        function verifyCIPC() {
            const companyName = document.getElementById('companyName').value;
            const regNumber = document.getElementById('regNumber').value;
            const location = document.getElementById('location').value;
            
            if (!companyName || !regNumber || !location) {
                alert('Please fill in all required fields including Eastern Cape location.');
                return;
            }
            
            // Strict Eastern Cape validation
            if (!location || location === '') {
                alert('You must select an Eastern Cape location to proceed.');
                return;
            }
            
            const statusDiv = document.getElementById('cipc-status');
            const verifyBtn = document.getElementById('verify-cipc-btn');
            
            // Show verifying status
            statusDiv.innerHTML = `
                <div style="background: var(--warning); color: var(--white); padding: 1rem; border-radius: 8px; display: inline-flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-spinner fa-spin"></i>
                    Verifying with CIPC database...
                </div>
            `;
            verifyBtn.disabled = true;
            
            // Simulate CIPC API call with location validation
            setTimeout(() => {
                // Simulate 90% success rate for valid format
                if (Math.random() > 0.1) {
                    const locationText = document.getElementById('location').selectedOptions[0].text;
                    statusDiv.innerHTML = `
                        <div style="background: var(--success); color: var(--white); padding: 1rem; border-radius: 8px; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-check-circle"></i>
                            CIPC Verified: ${companyName} registered in ${locationText}, Eastern Cape
                        </div>
                    `;
                    businessVerified = true;
                    verifyBtn.innerHTML = '<i class="fas fa-check"></i> Eastern Cape Business Verified';
                    verifyBtn.style.background = 'var(--success)';
                } else {
                    statusDiv.innerHTML = `
                        <div style="background: var(--danger); color: var(--white); padding: 1rem; border-radius: 8px; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-exclamation-circle"></i>
                            Verification Failed: Business not found or not registered in Eastern Cape
                        </div>
                    `;
                    businessVerified = false;
                    verifyBtn.disabled = false;
                    verifyBtn.innerHTML = '<i class="fas fa-redo"></i> Retry Verification';
                }
            }, 2500);
        }
        
        function checkFormCompletion() {
            const companyName = document.getElementById('companyName').value;
            const regNumber = document.getElementById('regNumber').value;
            const industry = document.getElementById('industry').value;
            const yearsOperation = document.getElementById('yearsOperation').value;
            const employees = document.getElementById('employees').value;
            const location = document.getElementById('location').value;
            
            const verifyBtn = document.getElementById('verify-cipc-btn');
            
            if (companyName && regNumber && industry && yearsOperation && employees && location) {
                verifyBtn.disabled = false;
                verifyBtn.style.opacity = '1';
            } else {
                verifyBtn.disabled = true;
                verifyBtn.style.opacity = '0.5';
            }
        }
        
        function verifyDocument(type) {
            const card = document.getElementById(`${type}-card`);
            const status = document.getElementById(`${type}-status`);
            
            status.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            
            setTimeout(() => {
                if (Math.random() > 0.05) {
                    card.className = 'verification-card verified';
                    status.innerHTML = '<i class="fas fa-check"></i> Verified';
                    status.className = 'status-badge status-verified';
                    verificationStatus[type] = true;
                } else {
                    status.innerHTML = '<i class="fas fa-times"></i> Failed';
                    verificationStatus[type] = false;
                }
                updateVerificationProgress();
            }, 2000);
        }
        
        function updateVerificationProgress() {
            const completed = Object.values(verificationStatus).filter(Boolean).length;
            const percentage = (completed / 4) * 100;
            
            document.getElementById('progress-count').textContent = `${completed}/4`;
            document.getElementById('progress-fill').style.width = `${percentage}%`;
            
            const btn = document.getElementById('create-account-btn');
            if (completed === 4) {
                btn.disabled = false;
                btn.style.opacity = '1';
                btn.innerHTML = '<i class="fas fa-arrow-right"></i> Proceed to Account Creation';
                btn.onclick = () => nextStep();
            }
        }
        

        
        function generateLoginCredentials() {
            const companyName = document.getElementById('companyName').value || 'Company';
            const regNumber = document.getElementById('regNumber').value || '0000';
            
            // Generate username from company name and reg number
            const cleanCompanyName = companyName.replace(/[^a-zA-Z0-9]/g, '').toLowerCase();
            const regSuffix = regNumber.slice(-4);
            const username = `${cleanCompanyName.substring(0, 8)}${regSuffix}`;
            
            // Generate temporary password
            const chars = 'ABCDEFGHJKMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789';
            let password = '';
            for (let i = 0; i < 12; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            const usernameEl = document.getElementById('generated-username');
            const passwordEl = document.getElementById('generated-password');
            
            if (usernameEl) usernameEl.textContent = username;
            if (passwordEl) passwordEl.textContent = password;
        }
        
        function copyPassword() {
            const password = document.getElementById('generated-password').textContent;
            navigator.clipboard.writeText(password).then(() => {
                alert('Password copied to clipboard!');
            });
        }
        
        function downloadCredentials() {
            const companyName = document.getElementById('companyName').value;
            const username = document.getElementById('generated-username').textContent;
            const password = document.getElementById('generated-password').textContent;
            
            const content = `ELIDZ Eastern Cape Business Portal - Login Credentials\n\nCompany: ${companyName}\nUsername: ${username}\nTemporary Password: ${password}\n\nIMPORTANT: Change your password on first login\nLogin URL: ${window.location.origin}/portal/portal.html`;
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ELIDZ_Login_${username}.txt`;
            a.click();
            window.URL.revokeObjectURL(url);
        }
        
        function proceedToLogin() {
            window.location.href = 'portal/portal.html';
        }
        
        function updateAccountSummary() {
            const companyName = document.getElementById('companyName').value;
            const regNumber = document.getElementById('regNumber').value;
            const location = document.getElementById('location').selectedOptions[0]?.text || '-';
            const industry = document.getElementById('industry').selectedOptions[0]?.text || '-';
            
            document.getElementById('summary-business').textContent = companyName || '-';
            document.getElementById('summary-registration').textContent = regNumber || '-';
            document.getElementById('summary-location').textContent = location;
            document.getElementById('summary-sector').textContent = industry;
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                showStep(currentStep);
            }
        }

        function submitApplication() {
            alert('Application submitted successfully! You will be redirected to your dashboard.');
            window.location.href = 'portal/portal.html';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressBar();
            showStep(1);
            
            // Add event listeners to form fields
            const formFields = ['companyName', 'regNumber', 'industry', 'yearsOperation', 'employees', 'location'];
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', checkFormCompletion);
                    field.addEventListener('change', checkFormCompletion);
                    field.addEventListener('change', updateAccountSummary);
                }
            });
        });
    </script>
</body>
</html>